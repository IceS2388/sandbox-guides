<style type="text/css" media="screen">
/*
.nodes-image {
	margin:-100;
}
*/	
@import url("//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css");

.imageblock .content img, .image img {max-width: 900px;max-height: 300px;}
.deck h3, .deck h4 {display: block !important;margin-bottom:8px;margin-top:5px;}
.listingblock {margin:8px;}
.pull-bottom {position:relative;bottom:1em;}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.admonitionblock.note.speaker { display:none; }
</style>
<style type="text/css" media="screen">
/* #editor.maximize-editor .CodeMirror-code { font-size:24px; line-height:26px; } */
</style>
<article class="guide" ng-controller="AdLibDataController">
  <carousel class="deck container-fluid">
    <!--slide class="row-fluid">
      <div class="col-sm-3">
        <h3>Russian Twitter Trolls</h3>
        <p class="lead">Information</p>
			<!dl>
				
				
				
				
				
			</dl>
		</div>
      <div class="col-sm-9">
        <figure>
          <img style="width:300px" src=""/>
        </figure>
      </div>
    </slide-->
    


   <h4>Russian Twitter Trolls</h4>
   


<slide class="row-fluid">
  <div class="col-sm-12">
    <h3>Russian Twitter Trolls</h3>
    <br/>
    <div>
      <div class="col-lg-4">
<div class="paragraph">
<p>As part of the House Intelligence Committee investigation into how Russia may have influenced the 2016 US Election, Twitter released the screen names of almost 3000 Twitter accounts believed to be connected to Russia&#8217;s Internet Research Agency, a company known for operating social media troll accounts. Twitter immediately suspended these accounts, deleting their data from Twitter.com and the Twitter API.</p>
</div>
<div class="paragraph">
<p>A team at NBC News including <a href="https://twitter.com/bpopken">Ben Popken</a> and <a href="https://twitter.com/mrejfoxwas">EJ Fox</a> was able to reconstruct a dataset of the deleted data for their investigation <a href="https://www.nbcnews.com/tech/social-media/russian-trolls-went-attack-during-key-election-moments-n827176">showing how these troll accounts went on attack during key election moments.</a> NBC open-sourced the reconstructed dataset and released it as this Neo4j database.</p>
</div>
</div>
<div class="col-lg-3">
<div class="paragraph">
<p>This guide will show:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>an overview of the datamodel</p>
</li>
<li>
<p>how to explore the data using Cypher, the query language for graphs</p>
</li>
<li>
<p>some of the investigative queries used to make sense of the the dataset</p>
</li>
</ul>
</div>
</div>
<div class="col-lg-5">
<img src="//localhost:8001/img/article.png" class="img-responsive">
<div class="paragraph">
<p>Read the NBC News story about the data <a href="https://www.nbcnews.com/tech/social-media/russian-trolls-went-attack-during-key-election-moments-n827176">here</a></p>
</div>
</div>
	</div>
  </div>
</slide>



<slide class="row-fluid">
  <div class="col-sm-12">
    <h3>The Datamodel</h3>
    <br/>
    <div>
      <div class="col-lg-4">
<div class="paragraph">
<p>Neo4j uses the labeled property graph datamodel to represent data.</p>
</div>



   <h4>Nodes</h4>
   <div class="ulist">
<ul>
<li>
<p><strong>Tweet</strong> - The Tweet object</p>
</li>
<li>
<p><strong>User</strong> - A Twitter user</p>
</li>
<li>
<p><strong>Troll</strong> - An optional node label to identify users that are on the list of Russian troll accounts</p>
</li>
<li>
<p><strong>Hashtag</strong> - Any hashtags used in the tweet</p>
</li>
<li>
<p><strong>Source</strong> - The Twitter application used to post the tweet</p>
</li>
<li>
<p><strong>URL</strong> - A link embedded in a tweet</p>
</li>
</ul>
</div>
</div>
<div class="col-lg-3">



   <h4>Relationships</h4>
   <div class="ulist">
<ul>
<li>
<p><strong>POSTED</strong> - Connects the Tweet with the User who posted it</p>
</li>
<li>
<p><strong>MENTIONS</strong> - Connects any Users mentioned in the tweet</p>
</li>
<li>
<p><strong>HAS_TAG</strong> - Connect a Tweet to any Hashtags included in the tweet</p>
</li>
<li>
<p><strong>POSTED_VIA</strong> - Connects a Tweet to its source application node</p>
</li>
<li>
<p><strong>RETWEETED</strong> - Did this tweet retweet another tweet?</p>
</li>
<li>
<p><strong>IN_REPLY_TO</strong> - Is this tweet a reply to another tweet?</p>
</li>
</ul>
</div>
</div>
<div class="col-lg-5">
<img src="//localhost:8001/img/datamodel.png" class="img-responsive">
</div>
	</div>
  </div>
</slide>



<slide class="row-fluid">
  <div class="col-sm-12">
    <h3>Querying The Graph</h3>
    <br/>
    <div>
      <div class="col-lg-7">
<div class="paragraph">
<p>We use the Cypher query language to access data in Neo4j. Cypher is all about pattern matching. We simply define a graph pattern using Cypher and Neo4j will traverse the graph where that pattern exists, rendering the results for us to inspect.</p>
</div>
<div class="paragraph">
<p><strong>Click on this query to load it into the query editor:</strong></p>
</div>
<div class="listingblock">
<div class="title">Tweets posted by the user LeroyLovesUSA with the hashtag thanksobama</div>
<div class="content">
<pre mode="cypher"  class="highlight pre-scrollable programlisting cm-s-neo code runnable standalone-example ng-binding" data-lang="cypher" lang="cypher"><!--code class="cypher language-cypher"-->MATCH (u:User {screen_name: "LeroyLovesUSA"})-[:POSTED]-&gt;(t:Tweet)-[:HAS_TAG]-&gt;(ht:Hashtag {tag: "thanksobama"})
RETURN *<!--/code--></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Find tweets posted by Troll accounts that contain the word fraud</div>
<div class="content">
<pre mode="cypher"  class="highlight pre-scrollable programlisting cm-s-neo code runnable standalone-example ng-binding" data-lang="cypher" lang="cypher"><!--code class="cypher language-cypher"-->MATCH (t:Troll)-[:POSTED]-&gt;(tw:Tweet)
WHERE tw.text CONTAINS "fraud"
OPTIONAL MATCH p=(tw)-[:HAS_TAG|HAS_LINK|MENTIONS|IN_REPLY_TO]-(a)
RETURN * LIMIT 50<!--/code--></pre>
</div>
</div>
</div>
<div class="col-lg-5">
<img src="//localhost:8001/img/exampletweet1.png" class="img-responsive">
</div>
	</div>
  </div>
</slide>



<slide class="row-fluid">
  <div class="col-sm-12">
    <h3>Tweet Volume</h3>
    <br/>
    <div>
      <div class="col-lg-3">
<img src="//localhost:8001/img/volume.png" height="380">
</div>
<div class="col-lg-9">
<div class="paragraph">
<p>This chart from the <a href="https://www.nbcnews.com/tech/social-media/russian-trolls-went-attack-during-key-election-moments-n827176">NBC News article</a> shows that Russian Twitter troll tweet volume spiked during key election related events.</p>
</div>
<p></p>
<p></p>
<div class="listingblock">
<div class="title">Query for tweet volume by day</div>
<div class="content">
<pre mode="cypher"  class="highlight pre-scrollable programlisting cm-s-neo code runnable standalone-example ng-binding" data-lang="cypher" lang="cypher"><!--code class="cypher language-cypher"-->MATCH (:Troll)-[:POSTED]-&gt;(t:Tweet)
RETURN substring(t.created_str,0,10) AS day,
  COUNT(*) AS num ORDER BY day DESC LIMIT 10<!--/code--></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Query for tweet volume by month</div>
<div class="content">
<pre mode="cypher"  class="highlight pre-scrollable programlisting cm-s-neo code runnable standalone-example ng-binding" data-lang="cypher" lang="cypher"><!--code class="cypher language-cypher"-->MATCH (:Troll)-[:POSTED]-&gt;(t:Tweet)
RETURN substring(t.created_str,0,7) AS month,
  COUNT(*) AS num ORDER BY month DESC LIMIT 25<!--/code--></pre>
</div>
</div>
<div class="paragraph">
<p>We can see that much of the tweet volume occurs leading up to and immediately following the 2016 US Election.</p>
</div>
</div>
	</div>
  </div>
</slide>



<slide class="row-fluid">
  <div class="col-sm-12">
    <h3>Hashtags</h3>
    <br/>
    <div>
      <div class="paragraph">
<p>Hashtags were used by the trolls to insert themselves into conversations and gain visibility.</p>
</div>
<div class="listingblock">
<div class="title">What are the most common hashtags used by the trolls?</div>
<div class="content">
<pre mode="cypher"  class="highlight pre-scrollable programlisting cm-s-neo code runnable standalone-example ng-binding" data-lang="cypher" lang="cypher"><!--code class="cypher language-cypher"-->MATCH (ht:Hashtag)&lt;-[:HAS_TAG]-(tw:Tweet)&lt;-[:POSTED]-(:Troll)
WITH ht, COUNT(*) AS num ORDER BY num DESC
RETURN ht.tag AS hashtag, num LIMIT 10<!--/code--></pre>
</div>
</div>
	</div>
  </div>
</slide>



<slide class="row-fluid">
  <div class="col-sm-12">
    <h3>Tweet Sources Used</h3>
    <br/>
    <div>
      <div class="listingblock">
<div class="title">What are the common sources used for posting tweets</div>
<div class="content">
<pre mode="cypher"  class="highlight pre-scrollable programlisting cm-s-neo code runnable standalone-example ng-binding" data-lang="cypher" lang="cypher"><!--code class="cypher language-cypher"-->MATCH (:Troll)-[:POSTED]-&gt;(tw:Tweet)-[:POSTED_VIA]-&gt;(s:Source)
RETURN DISTINCT s.name AS source, COUNT(tw) AS tweets
ORDER BY tweets DESC<!--/code--></pre>
</div>
</div>
	</div>
  </div>
</slide>



<slide class="row-fluid">
  <div class="col-sm-12">
    <h3>Original Content vs Replies and Retweets</h3>
    <br/>
    <div>
      <div class="paragraph">
<p>Tweets can be retweets of other tweets or replies to existing tweets. Replying to popular users is another way to gain visibility.</p>
</div>
<div class="listingblock">
<div class="title">Find original content tweets posted by user @TEN_GOP</div>
<div class="content">
<pre mode="cypher"  class="highlight pre-scrollable programlisting cm-s-neo code runnable standalone-example ng-binding" data-lang="cypher" lang="cypher"><!--code class="cypher language-cypher"-->MATCH p=(t:Troll {user_key: "ten_gop"})-[:POSTED]-&gt;(tw:Tweet)
WHERE NOT EXISTS((tw)-[:RETWEETED]-&gt;(:Tweet)) AND NOT EXISTS((tw)-[:IN_REPLY_TO]-&gt;(:Tweet))
OPTIONAL MATCH (ht:Hashtag)&lt;-[:HAS_TAG]-(tw)
OPTIONAL MATCH (u:User)&lt;-[:MENTIONS]-(tw)
RETURN p,ht,u LIMIT 25<!--/code--></pre>
</div>
</div>
	</div>
  </div>
</slide>



<slide class="row-fluid">
  <div class="col-sm-12">
    <h3>Inferred Relationships</h3>
    <br/>
    <div>
      <div class="col-lg-9">
<div class="paragraph">
<p>Inferred relationships are important in graphs. For example, when a troll account retweets another troll&#8217;s tweet we could say the trolls have an inferred "AMPLIFIED" relationship: one troll is amplifying the message of the other.</p>
</div>
<div class="listingblock">
<div class="title">Inferred AMPLIFIED relationships exist when a troll account retweets another troll</div>
<div class="content">
<pre mode="cypher"  class="highlight pre-scrollable programlisting cm-s-neo code runnable standalone-example ng-binding" data-lang="cypher" lang="cypher"><!--code class="cypher language-cypher"-->MATCH p=(r1:Troll)-[:POSTED]-&gt;(:Tweet)&lt;-[:RETWEETED]-(:Tweet)&lt;-[:POSTED]-(r2:Troll)
RETURN p LIMIT 1<!--/code--></pre>
</div>
</div>
</div>
<div class="col-lg-3">
<img src="//localhost:8001/img/amplified.png" class="img-responsive">
</div>
	</div>
  </div>
</slide>



<slide class="row-fluid">
  <div class="col-sm-12">
    <h3>Graph Algorithms</h3>
    <br/>
    <div>
      <div class="paragraph">
<p><a href="https://neo4j.com/graph-analytics/">Graph algorithms</a> are a way to apply analytics to the entire graph to further enhance our understanding of the data. They</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Centrality</strong> - What are the most important nodes in the network? <em>PageRank, Betweenness Centrality, Closeness Centrality</em></p>
</li>
<li>
<p><strong>Community detection</strong> - How can the graph be partitioned? <em>Union Find, Louvain, Label Propagation, Connected Components</em></p>
</li>
<li>
<p><strong>Pathfinding</strong> - What are the shortest paths or best routes available given cost? <em>Minimum Weight Spanning Tree, All Pairs- and Single Source- Shortest Path, Dijkstra</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We can run these algorithms in Neo4j with Cypher using the <a href="https://github.com/neo4j-contrib/neo4j-graph-algorithms">Neo4j Graph Algorithms</a> procedures.</p>
</div>
	</div>
  </div>
</slide>



<slide class="row-fluid">
  <div class="col-sm-12">
    <h3>Centrality</h3>
    <br/>
    <div>
      <div class="paragraph">
<p>Let&#8217;s run PageRank over this inferred AMPLIFIED graph to find the most influential trolls</p>
</div>
<div class="listingblock">
<div class="title">Run PageRank over the inferred troll amplification graph. This will write the results back to a pagerank property on the nodes</div>
<div class="content">
<pre mode="cypher"  class="highlight pre-scrollable programlisting cm-s-neo code runnable standalone-example ng-binding" data-lang="cypher" lang="cypher"><!--code class="cypher language-cypher"-->CALL algo.pageRank("MATCH (t:Troll) RETURN id(t) AS id","MATCH (r1:Troll)-[:POSTED]-&gt;(:Tweet)&lt;-[:RETWEETED]-(:Tweet)&lt;-[:POSTED]-(r2:Troll) RETURN id(r2) as source, id(r1) as target", {graph:'cypher'})<!--/code--></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Lookup Trolls with highest PageRank score</div>
<div class="content">
<pre mode="cypher"  class="highlight pre-scrollable programlisting cm-s-neo code runnable standalone-example ng-binding" data-lang="cypher" lang="cypher"><!--code class="cypher language-cypher"-->MATCH (t:Troll) WHERE EXISTS(t.pagerank)
RETURN t.screen_name AS troll, t.pagerank AS pagerank ORDER BY pagerank DESC LIMIT 25<!--/code--></pre>
</div>
</div>
<div class="listingblock">
<div class="title">What are the top trolls tweeting about?</div>
<div class="content">
<pre mode="cypher"  class="highlight pre-scrollable programlisting cm-s-neo code runnable standalone-example ng-binding" data-lang="cypher" lang="cypher"><!--code class="cypher language-cypher"-->MATCH (t:Troll) WHERE EXISTS(t.pagerank)
WITH t ORDER BY t.pagerank LIMIT 25
MATCH (t)-[:POSTED]-&gt;(tw:Tweet)-[:HAS_TAG]-(ht:Hashtag)
RETURN ht.tag, COUNT(*) AS num ORDER BY num DESC LIMIT 25<!--/code--></pre>
</div>
</div>
	</div>
  </div>
</slide>



<slide class="row-fluid">
  <div class="col-sm-12">
    <h3>Further exploration</h3>
    <br/>
    <div>
      <div class="col-lg-4">



   <h4>Ideas</h4>
   <div class="paragraph">
<p>We&#8217;ve only just begun to explore the data. Here are some ideas for further data analysis:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Location</p>
</li>
<li>
<p>Entity extraction</p>
</li>
<li>
<p>Temporal data analysis (are tweets posted at a certain time of day?)</p>
</li>
<li>
<p>Clustering the graph</p>
</li>
<li>
<p>Exploring most co-mentioned users and hashtags</p>
</li>
</ul>
</div>
</div>
<div class="col-lg-5">



   <h4>Resources</h4>
   <div class="ulist">
<ul>
<li>
<p>Web <a href="https://neo4j.com/docs/cypher-refcard/current/?ref=browser-guide">Cypher Refcard</a></p>
</li>
<li>
<p>Web <a href="https://neo4j.com/docs/?ref=browser-guide">Neo4j Documentation</a></p>
</li>
<li>
<p>Book (free download) <a href="http://graphdatabases.com/?ref=browser-guide">Graph Databases</a></p>
</li>
<li>
<p>Blog <a href="https://medium.com/@david.allen_3172/using-nlp-in-neo4j-ac40bc92196f">Using NLP In Neo4j</a></p>
</li>
<li>
<p>Blog <a href="http://www.lyonwj.com/2017/11/15/entity-extraction-russian-troll-tweets-neo4j/">NLP And Entity Extraction</a></p>
</li>
<li>
<p>Article <a href="https://www.nbcnews.com/tech/social-media/russian-trolls-went-attack-during-key-election-moments-n827176">NBC News Article</a></p>
</li>
</ul>
</div>
</div>
<div class="col-lg-3">
<img src="//localhost:8001/img/viz.png" class="img-responsive">
</div>
	</div>
  </div>
</slide>
  </carousel>
</article>